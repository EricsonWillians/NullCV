# .env.example

# NullCV Configuration Management
# This file contains example environment variables for configuration.
# Copy this file to .env and customize as needed.

## Core Application Settings
PROJECT_NAME=NullCV
PROJECT_DESCRIPTION="Proof-of-Work, Not Promises â€” A decentralized talent marketplace."
VERSION=0.1.0
DEBUG=false
ENVIRONMENT=dev  # dev | test | staging | prod
INSTANCE_ID=  # Auto-generated if not specified
CONFIG_CHECK_INTERVAL=60  # How often to check for config changes (seconds)
ENABLE_TELEMETRY=false
DATA_DIR=./data
TEMP_DIR=./tmp
MAX_STARTUP_WAIT=30
MAINTENANCE_MODE=false

## Logging Configuration
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT="%(asctime)s | %(levelname)s | %(name)s | %(message)s"
LOG_TO_FILE=false
LOG_FILE_PATH=
LOG_MAX_SIZE_MB=10
LOG_BACKUP_COUNT=5
LOG_LINE_TIMESTAMP=true
LOG_INCLUDE_THREAD=false
LOG_SANITIZE_SENSITIVE=true

## Server Settings
SERVER_HOST=0.0.0.0
SERVER_PORT=8000
API_PREFIX=/api
API_VERSION=v1
API_DOCS_URL=/docs
API_ENABLE_SWAGGER=true
API_ENABLE_REDOC=true
CORS_ORIGINS=["http://localhost:3000"]
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=["GET", "POST", "PUT", "DELETE", "OPTIONS", "PATCH"]
CORS_ALLOW_HEADERS=["*"]
CORS_EXPOSE_HEADERS=["Content-Disposition"]
CORS_MAX_AGE=600
MAX_REQUEST_SIZE_MB=50
TRUSTED_HOSTS=["localhost"]
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_PERIOD_SECONDS=60
RATE_LIMIT_BURST=20
RATE_LIMIT_STRATEGY=fixed-window
BEHIND_PROXY=false
PROMETHEUS_METRICS=false
GRACEFUL_SHUTDOWN_TIMEOUT=10
RESPONSE_COMPRESSION=true
WORKER_COUNT=  # Auto-determined if not specified

## Authentication & Security
SECRET_KEY=  # Required: must be at least 32 characters
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=10080  # 7 days
REFRESH_TOKEN_EXPIRE_DAYS=30
PASSWORD_RESET_TOKEN_EXPIRE_MINUTES=30
VERIFY_EMAIL_TOKEN_EXPIRE_MINUTES=1440  # 1 day
MIN_PASSWORD_LENGTH=12
PASSWORD_COMPLEXITY={"uppercase": 1, "lowercase": 1, "digits": 1, "special": 1}
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION_MINUTES=15
SESSION_COOKIE_NAME=nullcv_session
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=lax
ENABLE_2FA=false
REQUIRE_2FA_FOR_ADMINS=true
JWT_HEADER_NAME=Authorization
JWT_HEADER_TYPE=Bearer
ADMIN_ROLE_NAME=admin
DEFAULT_ROLE_NAME=user
HASHING_ALGORITHM=argon2
ENFORCE_HTTPS=true
CSRF_PROTECTION=true
CSRF_COOKIE_NAME=csrftoken
AUTH_PROVIDERS=["password"]

## PostgreSQL Database
POSTGRES_SERVER=  # Required
POSTGRES_PORT=5432
POSTGRES_USER=  # Required
POSTGRES_PASSWORD=  # Required
POSTGRES_DB=  # Required
SQLALCHEMY_POOL_SIZE=5
SQLALCHEMY_MAX_OVERFLOW=10
SQLALCHEMY_POOL_TIMEOUT=30
SQLALCHEMY_POOL_RECYCLE=1800
SQLALCHEMY_ECHO=false
DATABASE_ECHO_POOL=false
DATABASE_SSL_REQUIRED=false
DATABASE_ISOLATION_LEVEL=READ COMMITTED
DATABASE_SCHEMA=
DATABASE_CONNECT_RETRIES=5
DATABASE_RETRY_BACKOFF=1.5
DATABASE_MIGRATIONS_DIR=migrations
DATABASE_VERIFY_MIGRATIONS_ON_STARTUP=true

## SQLite (for local development)
SQLITE_DATABASE_PATH=./data/nullcv.db
SQLITE_JOURNAL_MODE=WAL
SQLITE_SYNCHRONOUS=NORMAL
SQLITE_FOREIGN_KEYS=true
SQLITE_BUSY_TIMEOUT=5000

## Database Security
DATABASE_ENCRYPT_SENSITIVE_DATA=false
DATABASE_ENCRYPTION_KEY=
VERIFY_SIGNATURES_ON_READ=true
AUTO_SYNC_DATABASE=true

## Blockchain Integration
ETHEREUM_NODE_URL=  # Required 
ETHEREUM_CHAIN_ID=1  # 1=mainnet, 5=goerli, etc
ETHEREUM_FALLBACK_NODES=[]
CONTRACT_ADDRESS=  # Required: 0x...
WALLET_PRIVATE_KEY=  # Optional, for sending transactions
GAS_PRICE_STRATEGY=medium  # slow, medium, fast, fastest
MAX_GAS_PRICE_GWEI=150
GAS_LIMIT_MARGIN=1.2
TRANSACTION_TIMEOUT=120
TRANSACTION_CONFIRMATIONS=1
RETRY_FAILED_TRANSACTIONS=true
ENABLE_ENS_RESOLUTION=true
MULTICALL_BATCH_SIZE=100
EVENT_POLLING_INTERVAL=15
EVENT_CONFIRMATION_BLOCKS=12
ABI_CACHE_DIR=./data/abi_cache
SMART_CONTRACT_CONSTRUCTOR_ARGS={}
WEB3_REQUEST_TIMEOUT=30
WEB3_MAX_RETRIES=3
CONNECT_TO_INFURA=false
INFURA_PROJECT_ID=
CONNECT_TO_ALCHEMY=false
ALCHEMY_API_KEY=

## IPFS Configuration
IPFS_API_URL=http://localhost:5001/api/v0
IPFS_GATEWAY_URL=https://ipfs.io/ipfs/
IPFS_CONNECT_TIMEOUT=10
IPFS_READ_TIMEOUT=30
IPFS_MAX_FILE_SIZE_MB=50
IPFS_PIN_FILES=true
IPFS_FALLBACK_GATEWAYS=["https://ipfs.io/ipfs/", "https://gateway.pinata.cloud/ipfs/", "https://cloudflare-ipfs.com/ipfs/"]
IPFS_LOCAL_STORAGE_PATH=./data/ipfs
IPFS_REPLICATION_FACTOR=3
IPFS_USE_KUBO=false
IPFS_KUBO_PATH=
IPFS_USE_PINNING_SERVICE=false
IPFS_PINNING_SERVICE_URL=
IPFS_PINNING_SERVICE_KEY=
IPFS_CONTENT_VERIFICATION=true
IPFS_CACHE_DURATION=86400
IPFS_PROGRESS_CALLBACK=false

## Federation & ActivityPub
ACTIVITYPUB_ENABLED=true
ACTIVITYPUB_DOMAIN=  # Required when ActivityPub is enabled
FEDERATION_NODE_ID=  # Auto-generated if not specified
FEDERATION_PUBLIC_KEY=
FEDERATION_PRIVATE_KEY=
ALLOW_REMOTE_FOLLOWS=true
FEDERATION_SHARED_SECRET=
FEDERATION_MAX_PAYLOAD_SIZE_MB=10
FEDERATION_REQUEST_TIMEOUT=30
FEDERATION_SIGNATURE_EXPIRES=300
FEDERATION_INBOX_CONCURRENCY=5
FEDERATION_BACKOFF_FACTOR=1.5
FEDERATION_MAX_RETRY_ATTEMPTS=5
FEDERATION_OUTBOX_BATCH_SIZE=50
FEDERATION_TRUSTED_INSTANCES=[]
FEDERATION_ALLOWED_INSTANCES=  # null = all allowed
FEDERATION_BLOCKED_INSTANCES=[]
FEDERATION_SYNC_INTERVAL=3600

## Email Configuration
EMAIL_ENABLED=true
EMAIL_SENDER_NAME=NullCV
EMAIL_SENDER_ADDRESS=noreply@nullcv.io
EMAIL_SMTP_SERVER=localhost
EMAIL_SMTP_PORT=587
EMAIL_SMTP_USERNAME=
EMAIL_SMTP_PASSWORD=
EMAIL_USE_TLS=true
EMAIL_USE_SSL=false
EMAIL_TEMPLATES_DIR=./templates/email
EMAIL_RATE_LIMIT=100
EMAIL_QUEUE_PATH=./data/email_queue
EMAIL_DEFAULT_LANGUAGE=en
EMAIL_TEST_MODE=false
EMAIL_TEST_RECIPIENTS=[]
EMAIL_VERIFICATION_REQUIRED=true
EMAIL_INCLUDE_UNSUBSCRIBE_LINK=true
EMAIL_MAX_RETRIES=3
EMAIL_RETRY_DELAY=300

## Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_USE_SSL=false
REDIS_CONNECTION_TIMEOUT=10
REDIS_SOCKET_TIMEOUT=5
REDIS_POOL_MIN_SIZE=1
REDIS_POOL_MAX_SIZE=10
REDIS_KEY_PREFIX=nullcv:
REDIS_USE_CLUSTER=false
REDIS_CLUSTER_NODES=[]
REDIS_SENTINEL_MASTER=
REDIS_SENTINEL_NODES=[]
REDIS_USE_CACHE=true
REDIS_CACHE_TTL=3600

## API Security
API_KEY_HEADER_NAME=X-API-Key
API_REQUIRE_SIGNED_REQUESTS=false
API_REQUEST_SIGNING_HEADER=X-Request-Signature
API_REQUEST_TIMESTAMP_HEADER=X-Request-Timestamp
API_REQUEST_MAX_AGE=300
API_RATE_LIMIT_BY_IP=true
API_RATE_LIMIT_BY_USER=true
API_RATE_LIMIT_BY_KEY=true
API_RATE_LIMIT_EXEMPTED_IPS=[]
API_SANITIZE_REQUEST_LOGS=true
API_ALLOWED_USER_AGENTS=  # null = all allowed
API_BLOCKED_USER_AGENTS=[]
API_STRICT_CONTENT_TYPE=true
API_VALIDATE_REQUEST_SCHEMA=true
API_VALIDATE_RESPONSE_SCHEMA=false
API_REQUIRE_HTTPS=true
API_MAX_BATCH_SIZE=100
API_AUDIT_LOGGING=true

## Monitoring & Observability
ENABLE_METRICS=true
METRICS_PORT=9090
METRICS_PATH=/metrics
METRICS_COLLECTION_INTERVAL=15
ENABLE_TRACING=false
TRACING_SAMPLING_RATE=0.1
TRACING_EXPORTER=jaeger
TRACING_ENDPOINT=
TRACING_SERVICE_NAME=nullcv
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_INCLUDE_DETAILS=true
ERROR_REPORTING_ENABLED=true
ERROR_REPORTING_DSN=
LOG_REQUEST_RESPONSE=false
PERFORMANCE_MONITORING_ENABLED=true
RESOURCE_USAGE_ALERTS=true
CPU_USAGE_THRESHOLD=80.0
MEMORY_USAGE_THRESHOLD=80.0
DISK_USAGE_THRESHOLD=85.0

## Caching Configuration
CACHE_ENABLED=true
CACHE_TYPE=memory  # memory, redis, memcached
CACHE_KEY_PREFIX=nullcv:
CACHE_DEFAULT_TTL=300
CACHE_MAX_SIZE=1000
CACHE_SERIALIZE_JSON=true
CACHE_COMPRESS_LARGE_VALUES=true
CACHE_COMPRESSION_THRESHOLD=1024
CACHE_COMPRESSION_LEVEL=6
CACHE_MEMCACHED_SERVERS=["localhost:11211"]
CACHE_CONNECTION_POOL_SIZE=10
CACHE_JITTER=0.1
CACHE_SCHEMA_VERSION=v1
CACHE_NULL_TIMEOUT=60
CACHE_USE_FINGERPRINTING=true
CACHE_STALE_WHILE_REVALIDATE=true
CACHE_STALE_TTL=86400

## Encryption & Secrets
CONFIG_ENCRYPTION_KEY=  # Key for encrypting sensitive config values
SECRETS_PATH=  # Path to directory containing secrets